---
layout: post
title: HTTP/1
date: 2023-11-06
categories: [네트워크, 프로토콜]
tags: [HTTP]
---

## HTTP/1.0

HTTP/1.0은 기본적으로 한 연결당 하나의 요청을 처리하도록 설계되어있습니다. 이는 RTT 증가를 불러오게 됩니다.

### RTT 증가

RTT는 패킷이 목적지에 도달하고 다시 출발지로 돌아오기까지 걸리는 시간이며 패킷 왕복 시간을 말합니다.  
![RTT 증가](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/ca9f0d0e-be66-47b1-bf02-c6ecdbe67d11)

서버로부터 파일을 가져올 때마나 TCP 3-웨이 핸드셰이크를 계속해서 열어야 하기 때문에 RTT가 증가합니다.

### RTT의 증가를 해결하기 위한 방법

RTT가 증가하니 서버에 부담이 많이 가고 사용자 응답 시간이 길어졌습니다. 이를 해결하기 위해 이미지 스플리팅, 코드 압축, 이미지 Base64 인코딩을 사용하고 했습니다.

- **`이미지 스플리팅`**  
  많은 이미지를 다운로드받게 되면 과부하가 걸리기 때문에 많은 이미지를 합쳐 있는 하나의 이미지를 다운로드하는 방법
- **`코드 압축`**  
  개행 문자, 빈칸을 없애서 코드의 크기를 최소화하는 방법
- **`이미지 Base64 인코딩`**  
  이미지 파일을 64진법으로 이루어진 문자열로 인코딩하는 방법

## HTTP/1.1

매번 TCP 연결을 하는 것이 아니라 한 번 TCP 초기화를 한 이후에 keep-alive라는 옵션으로 여러 개의 파일을 송수신할 수 있게 변경된 버전입니다.  
참고로 HTTP/1.0에서도 keep-alive가 있었지만 표준화가 되어 있지 않았고 HTTP/1.1부터 표준화가 되어 기본 옵션으로 설정되었습니다.

![HTTP/1.1](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/4bd0b435-a969-4843-9e5c-f5e9b0b0487f)

다음 그림처럼 한번 TCP 3-웨이 핸드셰이크가 발생하면 그 다음부터 발생하지 않는 것을 볼 수 있습니다. 하지만 다수의 리소스를 처리하기 때문에 대기 시간이 길어지는 단점이 있습니다.

### HOL Blocking

HOL Blocking(Head Of Line Blocking)은 네트워크에서 같은 큐에 있는 패킷이 그 첫 번째 패킷에 의해 지연될 때 발생하는 성능 저하 현상입니다.

![HOL Blocking](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/288a9bc1-8955-4497-82df-33c9e9004a16)

### 무거운 헤더 구조

HTTP/1.1의 헤더에는 쿠키 등 많은 메타데이터가 들어 있고 압축이 되지 않아 무거웠습니다.

---

참고)  
도서 - 면접을 위한 CS 전공지식 노트
