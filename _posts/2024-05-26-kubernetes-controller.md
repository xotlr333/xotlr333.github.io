---
layout: post
title: 2. 쿠버네티스 컨트롤러
date: 2024-05-26
categories: [Kubernetes, 2.쿠버네티스 기본 개념]
tags: [컨트롤러]
---

- 쿠버네티스 컨트롤러는 **파드를 관리하는 역할**을 합니다.

![Untitled](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/80dff28a-7b05-4538-bf4c-38272e4411e6)

## 디플로이먼트(Deployment)

- 디플로이언트는 **쿠버네티스에서 상태가 없는 애플리케이션을 배포할 때 사용하는 가장 기본적인 컨트롤러**입니다.
- 여기서 상태가 없는 애플리케이션은 파드가 삭제되었을 때 데이터를 보존하지 않아도 되는 애플리케이션을 의미합니다.
- 디플로이언트는 다음과 같은 형식의 매니페스트를 사용합니다.

![Untitled 1](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/4c23fd73-b9f6-42e9-a247-bc9d3a4daeee)

## 레플리카셋(ReplicaSet)

- 레플리카셋은 **몇 개의 파드를 유지할지 결정하는 컨트롤러**입니다.
- 예를 들어, 5개의 파드를 유지하도록 설정했다면 1개의 파드가 삭제되었다 해도 5개의 파드를 유지하기 위해 또 다른 파드 1개를 생성합니다.

![Untitled 2](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/9a8eceb9-072a-4689-9f19-e9f74dcded03)

- 레플리카셋과 유사한 기능을 가진 **레플리케이션(Replication) 컨트롤러**도 있습니다.
- 특정 파드의 개수를 유지하는 기능은 같지만 차이점이 있습니다.

| 구분 | 레플리카셋 | 레플리케이션 컨트롤러 |
| --- | --- | --- |
| 셀렉터
(selector) | 집합 기반으로 in, not in, exists 같은 연산자를 지원함 | 등호 기반으로 레이블을 선택할 때 =, !=와 같이 같은지, 다른지만 비교함 |
| 롤링 업데이트
(rolling-update) | 롤링 업데이트를 사용하려면 디플로이먼트를 이용해야 함 | 롤링 업데이트 옵션을 지원함 |
- 여기서 **롤링 업데이트**는 기존에 배포된 애플리케이션을 수정해 재배포할 때, 새 버전의 애플리케이션이 포함된 파드는 하나씩 늘리고 이전 버전의 애플리케이션이 포함된 파드는 줄여가는 방식입니다.

## 잡(Job)

- 잡은 **하나 이상의 파드를 지정하고 지정된 수의 파드가 성공적으로 실행**되도록 합니다.
- 예를 들어, 노드의 하드웨어 장애나 재부팅 등으로 파드가 비정상적으로 작동하면 다른 노드에서 파드를 시작해 서비스가 지속되도록 합니다.

![Untitled 3](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/cac733f1-6cc3-4611-91fe-314e65c8fdab)

## 크론잡(CronJob)

- 크론잡은 잡의 일종으로 **특정 시간에 특정 파드를 실행시키는 것과 같이 지정한 일정에 따라서 잡을 실행**시킬 때 사용합니다.
- 따라서 크론잡은 주로 애플리케이션 프로그램, 데이터베이스와 같이 중요한 데이트를 백업하는 데 사용합니다.

![Untitled 4](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/b63473e8-9a75-4381-bad5-2c6bf6f7c26f)

## 데몬셋(DaemonSet)

- 데몬셋은 **디플로이먼트처럼 파드를 생성하고 관리**합니다.
- 디플로이먼트가 실행해야 할 파드의 개수와 배포 전략을 세분화해 조작할 수 있다면, 데몬셋은 **특정 노드 또는 모든 노드에 파드를 배포하고 관리**합니다.
- 데몬셋은 주로 노드마다 배치되어야하는 성능 수집 및 로그 수집 같은 작업에 사용됩니다.

![Untitled 5](https://github.com/xotlr333/xotlr333.github.io/assets/81614820/d3987b10-f4e7-4f51-a1f5-349f8c1985c6)



---
참고)  
도서-쉽게 시작하는 쿠버네티스